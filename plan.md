# 목표
교원 평가 점수표를 "정적 웹페이지(HTML/CSS/JS)"로 만들어 사용자가 체크/입력하면 자동으로 점수를 계산해주는 계산기를 만든다.
빌드도구/프레임워크 금지: Next.js/React/Vue 없이 순수 HTML + Vanilla JS + CSS만 사용.
단일 폴더로 실행 가능해야 함(파일 열기 or 간단한 static server).

# 산출물(파일 3개)
- index.html  : UI
- style.css   : 스타일
- app.js      : 로직(상태, 이벤트, 점수계산, 결과렌더)
(선택) rubric.js : 점수표/설정 상수 분리 (원하면 app.js에 합쳐도 됨)

# UI 요구사항(한 페이지)
상단: "총점" 큰 숫자 + 영역별(①~④) 점수 요약 카드
본문: 4개 영역을 <details>/<summary> 또는 섹션 카드로 구성
하단: "상세 산출 내역 테이블" (항목명 / 선택값 / 산식 / 점수 / 비고)

추가 버튼:
- [초기화] [로컬 저장] [불러오기] [인쇄]
(저장/불러오기: localStorage 사용)

# 공통 UX 규칙
- 각 항목 입력 시 즉시 재계산(실시간)
- "상한(cap)" 적용 시 경고/메모를 결과에 표시
- 상호배타 선택은 UI에서 강제(예: 담임 vs 비담임)

---

# 점수 규칙(이번 버전 기준)

## ① 학습지도(최대 30)
### 1) 수업시수(최대 25)
- 라디오로 선택(간단 버전)
  - 18시간 이상: 25
  - 17시간: 24
  - 16시간: 23
  - 15시간: 22
  - 14시간 이하: 21
- 추가 옵션 체크:
  - [ ] (감점) 2개월 이상 6개월 미만 해당: -0.5
  - [ ] (참고) 1,2학기 시수 상이(0.5) : 이건 "참고 표시"만 하고 점수에 직접 더하지 않음(표가 애매하므로)
※ 추후 필요하면 "학기별 입력 모드"로 확장 가능하지만, 이번엔 라디오로 단순화.

### 2) 다 과목 지도(최대 4 + (옵션) 한학기 가산)
🚨 핵심 요구사항: 학기/과목수/세특/시험여부로 나눠 입력해야 함.

#### 입력 UI
- 1학기 과목 테이블 + 2학기 과목 테이블(각각 [행 추가] 버튼)
- 과목 행 필드:
  - 과목명(text, 필수)
  - 성적산출 과목 여부(checkbox, 기본 체크)
  - 창체-진로 과목 여부(checkbox, 기본 해제)  // 체크 시 제외대상
  - 세특 작성 여부(checkbox)
  - 시험 여부(checkbox)

#### 유효 과목(eligible) 조건
- 성적산출 과목(isGraded=true)
- AND 창체-진로 과목(isCreativeCareer=false)

#### 중복 처리
- 과목명 정규화 normalize(name):
  - trim, 연속 공백 1칸, 영문은 소문자 처리(한글은 그대로)
- 같은 학기 내 동일 과목명 중복이면 1개로만 계산(경고 표시)

#### 1년/한학기 구분
- eligibleSem1 = 1학기 유효 과목 set
- eligibleSem2 = 2학기 유효 과목 set
- yearLong = 교집합(sem1∩sem2)  // 두 학기 모두 지도 → “1년 지도”
- oneSemester = 합집합 - 교집합   // 한 학기만 지도

필수 산출값:
- totalUniqueEligible = |union|
- yearLongEligible    = |yearLong|
- oneSemesterEligible = |oneSemester|

#### 점수 매핑(기본점수는 "1년 지도 과목수(yearLongEligible)" 기준)
- yearLongEligible >= 3  => 4.0
- yearLongEligible == 2  => 3.5
- yearLongEligible == 1  => 3.0
- yearLongEligible == 0  => 0.0

#### 한학기 가산(+0.2) (이번 버전 기본: any 모드)
- oneSemesterEligible > 0 이면 +0.2를 1회만 가산
- 단, 최대 4.0을 넘지 않게 cap
- UI 토글로 제공:
  - [ ] 한학기 지도 가산 적용(기본 체크)
  (체크 해제 시 가산 없이 기본점수만)

#### 세특/시험 조합 통계(출력용)
유효 과목들(학기별/전체)에서 아래 조합 카운트 계산해 결과에 표시:
- 세특&시험
- 세특만
- 시험만
- 둘다 아님

#### 결과 표시(반드시)
- 1학기 유효 과목 목록
- 2학기 유효 과목 목록
- 1년지도 목록(yearLong)
- 한학기 목록(oneSemester)
- yearLongEligible로 점수 매핑 근거
- 한학기 가산 적용 여부 및 최종점수

### 3) 수업공개(가산, 최대 1점)
- 숫자 입력: 공개 수업 횟수 count (0~10)
- 점수 = min(count * 0.5, 1.0)

학습지도 최종 = 수업시수 + 다과목지도 + 수업공개
(학습지도 자체의 30점 cap은 옵션: 최종 합이 30 넘으면 30으로 cap + 경고 표시)

---

## ② 생활지도(최대 30)
- 기본 27점 + 가산
- 체크:
  - [ ] 등교지도 희망 및 참여: +1.5
    - [ ] 한학기만 담당(등교): +0.75 로 계산(둘 중 하나만 적용되게)
  - [ ] 야간자율학습지도 희망 및 참여: +1.5
    - [ ] 한학기만 담당(야간): +0.75 로 계산(둘 중 하나만)
생활지도 최종 = min(27 + 가산합, 30) (30 cap)

---

## ③ 전문성개발(최대 10)
1) 연수시간(라디오)
- 45시간 이상: 6.5
- 30~45 미만: 5.5
- 30 미만: 4.5
2) 체크 가산
- [ ] 연구대회/교과연구/다락방 팀장: +2.0
- [ ] 다락방 팀원: +0.5
3) 포상(라디오)
- 0회: 0
- 1회: 1.0
- 2회 이상: 1.5
전문성개발 최종 = min(연수 + 가산 + 포상, 10)

---

## ④ 담당업무(최대 30)
1) 근무개월수(라디오)
- 12개월 근무: 2.0
- 12개월 미만: 1.0

2) 담임 vs 비담임(상호배타: 둘 중 하나만 선택 가능)
A) 담임(라디오)
- 12개월: 24
- 6~12미만: 22
- 2~6미만: 20

B) 비담임(라디오 그룹 2개 중 1개 선택)
- (부장/정년) 트랙:
  - 12개월 부장: 24
  - 6~12미만 보직: 23
  - 2~6미만 보직/정년: 22
- (기획/계원/진로/보건/명퇴) 트랙:
  - 12개월 보직: 23
  - 6~12미만 업무: 21
  - 2~6미만 업무/명퇴: 19

※ UI는 "담임/비담임" 먼저 선택 → 해당 라디오들만 보이게 처리

3) 곤란/이중업무 가산(택1)
- 없음: 0
- 방송/교과부장/담당+추가행정: +0.5
- 교무부장/학년부장+담임/교무기획: +1.0

4) 동아리 활동(택1)
- 정규 동아리 12개월: 2.0
  - [ ] 정규 동아리 한학기만: +1.0 (정규에만 적용)
- 자율 동아리 12개월: 0.5
- 없음: 0

5) 상조회(라디오)
- 없음: 0
- 6개월 이상: 1.0
- 6개월 미만: 0.5

담당업무 합계 = 근무개월 + (담임/비담임 점수) + 곤란/이중업무 + 동아리 + 상조회
담당업무 최종 = min(합계, 30) (30 cap) + cap 경고 표시

---

# 구현 상세(반드시 지킬 것)

## 1) 상태 관리
app.js에서 단일 state 객체를 유지하고, input change 이벤트마다 state 갱신 → recalc() 호출
- state.teaching.hoursBand, hoursPenaltyFlag, ...
- state.teaching.multiSubject.sem1[], sem2[]
- state.life...
- state.dev...
- state.duty...

## 2) 계산 함수 구조
- function normalizeSubjectName(name) {}
- function computeMultiSubject(state.teaching.multiSubject) { return {score, details...} }
- function computeTeaching(state) {}
- function computeLife(state) {}
- function computeDev(state) {}
- function computeDuty(state) {}
- function computeTotal(all) {}

각 compute는:
- score(숫자)
- breakdown(배열: {section, item, selected, formula, points, note})
- warnings(배열 문자열)
를 반환해서 결과 화면/테이블에 그대로 렌더할 수 있게.

## 3) 결과 렌더링
- 상단 총점/영역점수 갱신
- 하단 breakdown 테이블을 매번 재렌더
- 다 과목 지도 상세(목록/카운트/조합 통계)도 별도 박스로 표시

## 4) 로컬 저장/불러오기
- localStorage key: "teacher_eval_calc_v1"
- 저장: JSON.stringify(state)
- 불러오기: parse 후 UI에 반영(set inputs + 재렌더)
- 초기화: 기본 state로 리셋

## 5) 인쇄
- CSS @media print 로 입력영역 일부 숨기고 결과/내역 중심으로 인쇄 가능하게.

---

# 완료 조건(Acceptance Criteria)
- index.html을 열면 바로 동작(빌드/서버 필수 아님)
- "다 과목 지도"에서 1학기/2학기 과목을 추가하고 세특/시험을 체크하면:
  - 유효 과목만 카운트
  - 1년지도/한학기 자동 분류
  - 점수(3.0/3.5/4.0 + (선택)한학기+0.2 cap4.0)가 정확히 계산
  - 세특/시험 조합 통계가 표시
- ④ 담당업무 30 cap 등 상한 규칙이 적용되고 경고가 표시
- 결과 테이블에 항목별 산식/점수가 모두 나옴
